{"version":3,"file":"vue-croppa.js","sources":["../../src/util.js","../../node_modules/lodash/isObject.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/isObjectLike.js","../../src/cropper.vue","../../src/main.js"],"sourcesContent":["export default {\r\n  getPointerCoords(evt, cropperVM) {\r\n    let { canvas, quality } = cropperVM\r\n    let rect = canvas.getBoundingClientRect()\r\n    let clientX = evt.touches ? evt.touches[0].clientX : evt.clientX\r\n    let clientY = evt.touches ? evt.touches[0].clientY : evt.clientY\r\n    return {\r\n      x: (clientX - rect.left) * quality,\r\n      y: (clientY - rect.top) * quality\r\n    }\r\n  }\r\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","<template>\r\n  <div :class=\"`croppa-container ${img ? 'croppa--has-target' : ''}`\">\r\n    <input type=\"file\"\r\n           accept=\"image/*\"\r\n           ref=\"fileInput\"\r\n           hidden\r\n           @change=\"handleInputChange\" />\r\n    <canvas ref=\"canvas\"\r\n            @click=\"selectFile\"\r\n            @touchstart.stop.prevent=\"handlePointerStart\"\r\n            @mousedown.stop.prevent=\"handlePointerStart\"\r\n            @pointerstart.stop.prevent=\"handlePointerStart\"\r\n            @touchend.stop.prevent=\"handlePointerEnd\"\r\n            @touchcancel.stop.prevent=\"handlePointerEnd\"\r\n            @mouseup.stop.prevent=\"handlePointerEnd\"\r\n            @pointerend.stop.prevent=\"handlePointerEnd\"\r\n            @pointercancel.stop.prevent=\"handlePointerEnd\"\r\n            @touchmove.stop.prevent=\"handlePointerMove\"\r\n            @mousemove.stop.prevent=\"handlePointerMove\"\r\n            @pointermove.stop.prevent=\"handlePointerMove\"\r\n            @DOMMouseScroll.stop.prevent=\"handleWheel\"\r\n            @mousewheel.stop.prevent=\"handleWheel\"></canvas>\r\n    <svg t=\"1497460039530\"\r\n         class=\"icon icon-remove\"\r\n         v-if=\"showRemoveButton && img\"\r\n         @click=\"unset\"\r\n         :style=\"`top: -${height/40}px; right: -${width/40}px`\"\r\n         viewBox=\"0 0 1024 1024\"\r\n         version=\"1.1\"\r\n         xmlns=\"http://www.w3.org/2000/svg\"\r\n         p-id=\"1074\"\r\n         xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n         :width=\"width/10\"\r\n         :height=\"width/10\">\r\n      <path d=\"M511.921231 0C229.179077 0 0 229.257846 0 512 0 794.702769 229.179077 1024 511.921231 1024 794.781538 1024 1024 794.702769 1024 512 1024 229.257846 794.781538 0 511.921231 0ZM732.041846 650.633846 650.515692 732.081231C650.515692 732.081231 521.491692 593.683692 511.881846 593.683692 502.429538 593.683692 373.366154 732.081231 373.366154 732.081231L291.761231 650.633846C291.761231 650.633846 430.316308 523.500308 430.316308 512.196923 430.316308 500.696615 291.761231 373.523692 291.761231 373.523692L373.366154 291.918769C373.366154 291.918769 503.453538 430.395077 511.881846 430.395077 520.349538 430.395077 650.515692 291.918769 650.515692 291.918769L732.041846 373.523692C732.041846 373.523692 593.447385 502.547692 593.447385 512.196923 593.447385 521.412923 732.041846 650.633846 732.041846 650.633846Z\"\r\n            p-id=\"1075\"\r\n            fill=\"red\"></path>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import u from './util'\r\n  import debounce from 'lodash/debounce'\r\n\r\n  export default {\r\n    model: {\r\n      prop: 'value',\r\n      event: 'change'\r\n    },\r\n    props: {\r\n      value: Object,\r\n      width: Number,\r\n      height: Number,\r\n      placeholder: String,\r\n      placeholderColor: String,\r\n      placeholderFontSize: Number,\r\n      canvasColor: String,\r\n      quality: {\r\n        default: 2,\r\n        type: Number\r\n      },\r\n      zoomSpeed: {\r\n        default: 3,\r\n        type: Number,\r\n        validator: function (val) {\r\n          return val > 0\r\n        }\r\n      },\r\n      reverseZoomingGesture: Boolean,\r\n      preventWhiteSpace: Boolean,\r\n      showRemoveButton: Boolean\r\n    },\r\n\r\n    data () {\r\n      return {\r\n        instance: null,\r\n        canvas: null,\r\n        ctx: null,\r\n        img: null,\r\n        dragging: false,\r\n        lastMovingCoord: null,\r\n        imgData: {},\r\n        dataUrl: ''\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      canvasWidth () {\r\n        return this.width * this.quality\r\n      },\r\n\r\n      canvasHeight () {\r\n        return this.height * this.quality\r\n      }\r\n    },\r\n\r\n    mounted () {\r\n      this.init()\r\n    },\r\n\r\n    watch: {\r\n      value: function (val) {\r\n        this.instance = val\r\n      },\r\n      canvasWidth: 'init',\r\n      canvasHeight: 'init',\r\n      canvasColor: 'init',\r\n      placeholder: 'init',\r\n      placeholderColor: 'init',\r\n      placeholderFontSize: 'init',\r\n      preventWhiteSpace: 'imgContentInit'\r\n    },\r\n\r\n    methods: {\r\n      init () {\r\n        this.canvas = this.$refs.canvas\r\n        this.canvas.width = this.canvasWidth\r\n        this.canvas.height = this.canvasHeight\r\n        this.canvas.style.backgroundColor = this.canvasColor == 'default' ? '#e6e6e6' : this.canvasColor || '#e6e6e6'\r\n        this.canvas.style.width = this.width + 'px'\r\n        this.canvas.style.height = this.height + 'px'\r\n        this.ctx = this.canvas.getContext('2d')\r\n        this.unset()\r\n        this.$emit('change', {\r\n          getCanvas: () => this.canvas,\r\n          getContext: () => this.ctx,\r\n          getImage: () => this.img,\r\n          getImageData: () => this.imgData,\r\n          reset: this.unset,\r\n          selectFile: this.selectFile,\r\n          generateDataUrl: this.generateDataUrl\r\n        })\r\n      },\r\n\r\n\r\n      unset () {\r\n        let ctx = this.ctx\r\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\r\n        ctx.textBaseline = 'middle'\r\n        ctx.textAlign = 'center'\r\n        let defaultFontSize = this.canvasWidth / 1.5 / this.placeholder.length\r\n        let fontSize = this.placeholderFontSize == 0 ? defaultFontSize : this.placeholderFontSize || defaultFontSize\r\n        ctx.font = fontSize + 'px sans-serif'\r\n        ctx.fillStyle = this.placeholderColor == 'default' ? '#606060' : this.placeholderColor || '#606060'\r\n        ctx.fillText(this.placeholder, this.canvasWidth / 2, this.canvasHeight / 2)\r\n        this.img = null\r\n        this.$refs.fileInput.value = ''\r\n        this.imgData = {}\r\n      },\r\n\r\n      selectFile () {\r\n        if (this.img) return\r\n        // this.$refs.fileInput.value = ''\r\n        this.$refs.fileInput.click()\r\n      },\r\n\r\n      handleInputChange () {\r\n        let input = this.$refs.fileInput\r\n        if (!input.files.length) return\r\n        let file = input.files[0]\r\n        let fd = new FileReader()\r\n        fd.onload = (e) => {\r\n          let fileData = e.target.result\r\n          let img = new Image()\r\n          img.src = fileData\r\n          img.onload = () => {\r\n            this.img = img\r\n            this.imgContentInit()\r\n          }\r\n        }\r\n\r\n        fd.readAsDataURL(file)\r\n      },\r\n\r\n      imgContentInit () {\r\n        this.imgData.startX = 0\r\n        this.imgData.startY = 0\r\n        let imgWidth = this.img.naturalWidth\r\n        let imgHeight = this.img.naturalHeight\r\n        let imgRatio = imgHeight / imgWidth\r\n        let canvasRatio = this.canvasHeight / this.canvasWidth\r\n        if (imgRatio < canvasRatio) {\r\n          let ratio = imgHeight / this.canvasHeight\r\n          this.imgData.width = imgWidth / ratio\r\n          this.imgData.startX = -(this.imgData.width - this.canvasWidth) / 2\r\n          this.imgData.height = this.canvasHeight\r\n        } else {\r\n          let ratio = imgWidth / this.canvasWidth\r\n          this.imgData.height = imgHeight / ratio\r\n          this.imgData.startY = -(this.imgData.height - this.canvasHeight) / 2\r\n          this.imgData.width = this.canvasWidth\r\n        }\r\n        this.draw()\r\n      },\r\n\r\n      handlePointerStart (evt) {\r\n        if (evt.which && evt.which > 1) return\r\n        this.dragging = true\r\n\r\n        if (document) {\r\n          let cancelEvents = ['mouseup', 'touchend', 'touchcancel', 'pointerend', 'pointercancel']\r\n          for (let e of cancelEvents) {\r\n            document.addEventListener(e, this.handlePointerEnd)\r\n          }\r\n        }\r\n      },\r\n\r\n      handlePointerEnd (evt) {\r\n        this.dragging = false\r\n        this.lastMovingCoord = null\r\n      },\r\n\r\n      handlePointerMove (evt) {\r\n        if (!this.dragging) return\r\n        let coord = u.getPointerCoords(evt, this)\r\n        if (this.lastMovingCoord) {\r\n          this.move({\r\n            x: coord.x - this.lastMovingCoord.x,\r\n            y: coord.y - this.lastMovingCoord.y\r\n          })\r\n        }\r\n        this.lastMovingCoord = coord\r\n      },\r\n\r\n      handleWheel (evt) {\r\n        let coord = u.getPointerCoords(evt, this)\r\n        if (evt.wheelDelta < 0 || evt.detail < 0) {\r\n          // 手指向上\r\n          this.zoom(this.reverseZoomingGesture, coord)\r\n        } else if (evt.wheelDelta > 0 || evt.detail > 0) {\r\n          // 手指向下\r\n          this.zoom(!this.reverseZoomingGesture, coord)\r\n        }\r\n      },\r\n\r\n      move (offset) {\r\n        if (!offset) return\r\n        this.imgData.startX += offset.x\r\n        this.imgData.startY += offset.y\r\n        if (this.preventWhiteSpace) {\r\n          this.preventMovingToWhiteSpace()\r\n        }\r\n        this.draw()\r\n      },\r\n\r\n      preventMovingToWhiteSpace () {\r\n        if (this.imgData.startX > 0) {\r\n          this.imgData.startX = 0\r\n        }\r\n        if (this.imgData.startY > 0) {\r\n          this.imgData.startY = 0\r\n        }\r\n        if (this.canvasWidth - this.imgData.startX > this.imgData.width) {\r\n          this.imgData.startX = - (this.imgData.width - this.canvasWidth)\r\n        }\r\n        if (this.canvasHeight - this.imgData.startY > this.imgData.height) {\r\n          this.imgData.startY = - (this.imgData.height - this.canvasHeight)\r\n        }\r\n      },\r\n\r\n      zoom (zoomIn, pos) {\r\n        let speed = (this.canvasWidth / 100000) * this.zoomSpeed\r\n        let x = 1\r\n        if (zoomIn) {\r\n          x = 1 + speed\r\n        } else if (this.imgData.width > 20) {\r\n          x = 1 - speed\r\n        }\r\n        this.imgData.width = this.imgData.width * x\r\n        this.imgData.height = this.imgData.height * x\r\n        let offsetX = (x - 1) * (pos.x - this.imgData.startX)\r\n        let offsetY = (x - 1) * (pos.y - this.imgData.startY)\r\n        this.imgData.startX = this.imgData.startX - offsetX\r\n        this.imgData.startY = this.imgData.startY - offsetY\r\n\r\n        if (this.preventWhiteSpace) {\r\n          if (this.imgData.width < this.canvasWidth) {\r\n            let _x = this.canvasWidth / this.imgData.width\r\n            this.imgData.width = this.canvasWidth\r\n            this.imgData.height = this.imgData.height * _x\r\n          }\r\n\r\n          if (this.imgData.height < this.canvasHeight) {\r\n            let _x = this.canvasHeight / this.imgData.height\r\n            this.imgData.height = this.canvasHeight\r\n            this.imgData.width = this.imgData.width * _x\r\n          }\r\n          this.preventMovingToWhiteSpace()\r\n        }\r\n        this.draw()\r\n      },\r\n\r\n      draw () {\r\n        let ctx = this.ctx\r\n        if (!this.img) return\r\n        let { startX, startY, width, height } = this.imgData\r\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\r\n        ctx.drawImage(this.img, startX, startY, width, height)\r\n      },\r\n\r\n      generateDataUrl () {\r\n        if (!this.img) return ''\r\n        return this.canvas.toDataURL()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .croppa-container \r\n    display: inline-block\r\n    cursor: pointer\r\n    transition: opacity .3s\r\n    position: relative\r\n    &:hover\r\n      opacity: .7\r\n    &.croppa--has-target\r\n      cursor: move\r\n      // cursor: -moz-grab\r\n      &:hover\r\n        opacity: 1\r\n    svg.icon-remove\r\n      position: absolute\r\n      background: white\r\n      border-radius: 50%\r\n      box-shadow: -2px 2px 6px rgba(0, 0, 0, 0.7)\r\n      z-index: 10\r\n      cursor: pointer\r\n  .image\r\n    max-width: 100%\r\n    max-height: 100%\r\n\r\n</style>\r\n","import { version } from '../package.json'\r\nimport cropper from './cropper.vue'\r\n\r\nconst VueCroppa = {\r\n  install: function (Vue, options) {\r\n    Vue.component('croppa', cropper)\r\n  }\r\n}\r\n\r\nexport default VueCroppa"],"names":["evt","cropperVM","canvas","quality","rect","getBoundingClientRect","clientX","touches","clientY","left","top","global","freeGlobal","render","Object","Number","String","val","Boolean","width","height","init","instance","$refs","canvasWidth","canvasHeight","style","backgroundColor","canvasColor","ctx","getContext","unset","$emit","img","imgData","selectFile","generateDataUrl","clearRect","textBaseline","textAlign","defaultFontSize","placeholder","length","fontSize","placeholderFontSize","font","fillStyle","placeholderColor","fillText","fileInput","value","click","input","files","file","fd","FileReader","onload","e","fileData","target","result","Image","src","imgContentInit","readAsDataURL","startX","startY","imgWidth","naturalWidth","imgHeight","naturalHeight","imgRatio","canvasRatio","ratio","draw","which","dragging","document","cancelEvents","addEventListener","handlePointerEnd","lastMovingCoord","coord","u","getPointerCoords","move","x","y","wheelDelta","detail","zoom","reverseZoomingGesture","offset","preventWhiteSpace","preventMovingToWhiteSpace","zoomIn","pos","speed","zoomSpeed","offsetX","offsetY","_x","drawImage","toDataURL","VueCroppa","Vue","options","component","cropper"],"mappings":"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"}