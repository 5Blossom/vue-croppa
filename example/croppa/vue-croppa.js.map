{"version":3,"file":"vue-croppa.js","sources":["../../src/util.js","../../node_modules/lodash/isObject.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/isObjectLike.js","../../src/cropper.vue","../../src/main.js"],"sourcesContent":["export default {\r\n  getPointerCoords(evt, cropperVM) {\r\n    let { canvas, quality } = cropperVM\r\n    let rect = canvas.getBoundingClientRect()\r\n    let clientX = evt.touches ? evt.touches[0].clientX : evt.clientX\r\n    let clientY = evt.touches ? evt.touches[0].clientY : evt.clientY\r\n    return {\r\n      x: (clientX - rect.left) * quality,\r\n      y: (clientY - rect.top) * quality\r\n    }\r\n  }\r\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","<template>\r\n  <div :class=\"`croppa-container ${img ? 'croppa--has-target' : ''}`\">\r\n    <input type=\"file\"\r\n           accept=\"image/*\"\r\n           ref=\"fileInput\"\r\n           hidden\r\n           @change=\"handleInputChange\" />\r\n    <canvas ref=\"canvas\"\r\n            @click=\"selectFile\"\r\n            @touchstart=\"handlePointerStart\"\r\n            @mousedown=\"handlePointerStart\"\r\n            @pointerstart=\"handlePointerStart\"\r\n            @touchend=\"handlePointerEnd\"\r\n            @touchcancel=\"handlePointerEnd\"\r\n            @mouseup=\"handlePointerEnd\"\r\n            @pointerend=\"handlePointerEnd\"\r\n            @pointercancel=\"handlePointerEnd\"\r\n            @touchmove=\"handlePointerMove\"\r\n            @mousemove=\"handlePointerMove\"\r\n            @pointermove=\"handlePointerMove\"\r\n            @DOMMouseScroll=\"handleWheel\"\r\n            @mousewheel=\"handleWheel\"></canvas>\r\n    <!--<?xml version=\"1.0\" standalone=\"no\"?>-->\r\n    <!--<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">-->\r\n    <svg t=\"1497460039530\"\r\n         class=\"icon icon-remove\"\r\n         v-if=\"showRemoveButton && img\"\r\n         @click=\"unset\"\r\n         :style=\"`top: -${width/40}px; right: -${width/40}px`\"\r\n         viewBox=\"0 0 1024 1024\"\r\n         version=\"1.1\"\r\n         xmlns=\"http://www.w3.org/2000/svg\"\r\n         p-id=\"1074\"\r\n         xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n         :width=\"width/10\"\r\n         :height=\"width/10\">\r\n      <path d=\"M511.921231 0C229.179077 0 0 229.257846 0 512 0 794.702769 229.179077 1024 511.921231 1024 794.781538 1024 1024 794.702769 1024 512 1024 229.257846 794.781538 0 511.921231 0ZM732.041846 650.633846 650.515692 732.081231C650.515692 732.081231 521.491692 593.683692 511.881846 593.683692 502.429538 593.683692 373.366154 732.081231 373.366154 732.081231L291.761231 650.633846C291.761231 650.633846 430.316308 523.500308 430.316308 512.196923 430.316308 500.696615 291.761231 373.523692 291.761231 373.523692L373.366154 291.918769C373.366154 291.918769 503.453538 430.395077 511.881846 430.395077 520.349538 430.395077 650.515692 291.918769 650.515692 291.918769L732.041846 373.523692C732.041846 373.523692 593.447385 502.547692 593.447385 512.196923 593.447385 521.412923 732.041846 650.633846 732.041846 650.633846Z\"\r\n            p-id=\"1075\"\r\n            fill=\"red\"></path>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import u from './util'\r\n  import debounce from 'lodash/debounce'\r\n\r\n  export default {\r\n    props: {\r\n      width: Number,\r\n      height: Number,\r\n      placeholder: String,\r\n      placeholderColor: String,\r\n      placeholderFontSize: Number,\r\n      canvasColor: String,\r\n      quality: {\r\n        default: 2,\r\n        type: Number\r\n      },\r\n      zoomSpeed: {\r\n        default: 3,\r\n        type: Number,\r\n        validator: function (val) {\r\n          return val > 0\r\n        }\r\n      },\r\n      noWhiteSpace: Boolean,\r\n      showRemoveButton: Boolean\r\n    },\r\n\r\n    data () {\r\n      return {\r\n        canvas: null,\r\n        ctx: null,\r\n        img: null,\r\n        dragging: false,\r\n        lastMovingCoord: null,\r\n        imgData: {},\r\n        dataUrl: ''\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      canvasWidth () {\r\n        return this.width * this.quality\r\n      },\r\n\r\n      canvasHeight () {\r\n        return this.height * this.quality\r\n      }\r\n    },\r\n\r\n    mounted () {\r\n      this.init()\r\n    },\r\n\r\n    watch: {\r\n      canvasWidth: 'init',\r\n      canvasHeight: 'init',\r\n      canvasColor: 'init',\r\n      placeholder: 'init',\r\n      placeholderColor: 'init',\r\n      placeholderFontSize: 'init',\r\n      noWhiteSpace: 'imgContentInit'\r\n    },\r\n\r\n    methods: {\r\n      init () {\r\n        this.canvas = this.$refs.canvas\r\n        this.canvas.width = this.canvasWidth\r\n        this.canvas.height = this.canvasHeight\r\n        this.canvas.style.backgroundColor = this.canvasColor == 'default' ? '#e6e6e6' : this.canvasColor || '#e6e6e6'\r\n        this.canvas.style.width = this.width + 'px'\r\n        this.canvas.style.height = this.height + 'px'\r\n        this.ctx = this.canvas.getContext('2d')\r\n        this.unset()\r\n        this.$emit('init', {\r\n          reset: this.unset,\r\n          selectFile: this.selectFile,\r\n          generateDataUrl: this.generateDataUrl\r\n        })\r\n      },\r\n\r\n\r\n      unset () {\r\n        let ctx = this.ctx\r\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\r\n        ctx.textBaseline = 'middle'\r\n        ctx.textAlign = 'center'\r\n        let defaultFontSize = this.canvasWidth / 1.5 / this.placeholder.length\r\n        let fontSize = this.placeholderFontSize == 0 ? defaultFontSize : this.placeholderFontSize || defaultFontSize\r\n        ctx.font = fontSize + 'px sans-serif'\r\n        ctx.fillStyle = this.placeholderColor == 'default' ? '#606060' : this.placeholderColor || '#606060'\r\n        ctx.fillText(this.placeholder, this.canvasWidth / 2, this.canvasHeight / 2)\r\n        this.img = null\r\n        this.$refs.fileInput.value = ''\r\n        this.imgData = {}\r\n      },\r\n\r\n      selectFile () {\r\n        if (this.img) return\r\n        // this.$refs.fileInput.value = ''\r\n        this.$refs.fileInput.click()\r\n      },\r\n\r\n      handleInputChange () {\r\n        let input = this.$refs.fileInput\r\n        if (!input.files.length) return\r\n        let file = input.files[0]\r\n        let fd = new FileReader()\r\n        fd.onload = (e) => {\r\n          let fileData = e.target.result\r\n          let img = new Image()\r\n          img.src = fileData\r\n          img.onload = () => {\r\n            this.img = img\r\n            this.imgContentInit()\r\n          }\r\n        }\r\n\r\n        fd.readAsDataURL(file)\r\n      },\r\n\r\n      imgContentInit () {\r\n        this.imgData.startX = 0\r\n        this.imgData.startY = 0\r\n        let imgWidth = this.img.naturalWidth\r\n        let imgHeight = this.img.naturalHeight\r\n        if (imgWidth > imgHeight) {\r\n          let ratio = imgHeight / this.canvasHeight\r\n          this.imgData.width = imgWidth / ratio\r\n          this.imgData.startX = -(this.imgData.width - this.canvasWidth) / 2\r\n          this.imgData.height = this.canvasHeight\r\n        } else {\r\n          let ratio = imgWidth / this.canvasWidth\r\n          this.imgData.height = imgHeight / ratio\r\n          this.imgData.startY = -(this.imgData.height - this.canvasHeight) / 2\r\n          this.imgData.width = this.canvasWidth\r\n        }\r\n        this.draw()\r\n      },\r\n\r\n      handlePointerStart (evt) {\r\n        if (evt.which && evt.which > 1) return\r\n        this.dragging = true\r\n      },\r\n\r\n      handlePointerEnd (evt) {\r\n        this.dragging = false\r\n        this.lastMovingCoord = null\r\n      },\r\n\r\n      handlePointerMove (evt) {\r\n        if (!this.dragging) return\r\n        let coord = u.getPointerCoords(evt, this)\r\n        if (this.lastMovingCoord) {\r\n          this.move({\r\n            x: coord.x - this.lastMovingCoord.x,\r\n            y: coord.y - this.lastMovingCoord.y\r\n          })\r\n        }\r\n        this.lastMovingCoord = coord\r\n      },\r\n\r\n      handleWheel (evt) {\r\n        evt.preventDefault()\r\n        evt.stopPropagation()\r\n        let coord = u.getPointerCoords(evt, this)\r\n        if (evt.wheelDelta < 0 || evt.detail < 0) {\r\n          // 手指向上\r\n          this.zoom(true, coord)\r\n        } else if (evt.wheelDelta > 0 || evt.detail > 0) {\r\n          // 手指向下\r\n          this.zoom(false, coord)\r\n        }\r\n      },\r\n\r\n      move (offset) {\r\n        if (!offset) return\r\n        this.imgData.startX += offset.x\r\n        this.imgData.startY += offset.y\r\n        let stopit = false\r\n        if (this.noWhiteSpace) {\r\n          if (this.imgData.startX > 0 || this.canvasWidth - this.imgData.startX > this.imgData.width) {\r\n            this.imgData.startX -= offset.x\r\n            stopit = true\r\n          }\r\n          if (this.imgData.startY > 0 || this.canvasHeight - this.imgData.startY > this.imgData.height) {\r\n            this.imgData.startY -= offset.y\r\n            stopit = true\r\n          }\r\n        }\r\n        if (stopit) return\r\n        this.draw()\r\n      },\r\n\r\n      zoom (zoomIn, pos) {\r\n        let speed = (this.canvasWidth / 100000) * this.zoomSpeed\r\n        let x = 1\r\n        if (zoomIn) {\r\n          x = 1 + speed\r\n        } else if (this.imgData.width > 20) {\r\n          x = 1 - speed\r\n        }\r\n        this.imgData.width = this.imgData.width * x\r\n        this.imgData.height = this.imgData.height * x\r\n        let offsetX = (x - 1) * (pos.x - this.imgData.startX)\r\n        let offsetY = (x - 1) * (pos.y - this.imgData.startY)\r\n        this.imgData.startX = this.imgData.startX - offsetX\r\n        this.imgData.startY = this.imgData.startY - offsetY\r\n\r\n        if (this.noWhiteSpace) {\r\n          if (this.imgData.width < this.canvasWidth) {\r\n            let _x = this.canvasWidth / this.imgData.width\r\n            this.imgData.width = this.canvasWidth\r\n            this.imgData.height = this.imgData.height * _x\r\n            this.imgData.startX = this.imgData.startY = 0\r\n          }\r\n\r\n          if (this.imgData.height < this.canvasHeight) {\r\n            let _x = this.canvasHeight / this.imgData.height\r\n            this.imgData.width = this.canvasHeight\r\n            this.imgData.height = this.imgData.height * _x\r\n            this.imgData.startX = this.imgData.startY = 0\r\n          }\r\n        }\r\n        this.draw()\r\n      },\r\n\r\n      draw () {\r\n        let ctx = this.ctx\r\n        if (!this.img) return\r\n        let { startX, startY, width, height } = this.imgData\r\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\r\n        ctx.drawImage(this.img, startX, startY, width, height)\r\n      },\r\n\r\n      generateDataUrl () {\r\n        if (!this.img) return ''\r\n        return this.canvas.toDataURL()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .croppa-container \r\n    display: inline-block\r\n    cursor: pointer\r\n    transition: opacity .3s\r\n    position: relative\r\n    &:hover\r\n      opacity: .7\r\n    &.croppa--has-target\r\n      cursor: move\r\n      // cursor: -moz-grab\r\n      &:hover\r\n        opacity: 1\r\n    svg.icon-remove\r\n      position: absolute\r\n      background: white\r\n      border-radius: 50%\r\n      box-shadow: -2px 2px 6px rgba(0, 0, 0, 0.7)\r\n      z-index: 10\r\n      cursor: pointer\r\n  .image\r\n    max-width: 100%\r\n    max-height: 100%\r\n\r\n</style>\r\n","import { version } from '../package.json'\r\nimport cropper from './cropper.vue'\r\n\r\nconst VueCroppa = {\r\n  install: function (Vue, options) {\r\n    Vue.component('croppa', cropper)\r\n  }\r\n}\r\n\r\nexport default VueCroppa"],"names":["evt","cropperVM","canvas","quality","rect","getBoundingClientRect","clientX","touches","clientY","left","top","global","freeGlobal","render","Number","String","val","Boolean","width","height","init","$refs","canvasWidth","canvasHeight","style","backgroundColor","canvasColor","ctx","getContext","unset","$emit","selectFile","generateDataUrl","clearRect","textBaseline","textAlign","defaultFontSize","placeholder","length","fontSize","placeholderFontSize","font","fillStyle","placeholderColor","fillText","img","fileInput","value","imgData","click","input","files","file","fd","FileReader","onload","e","fileData","target","result","Image","src","imgContentInit","readAsDataURL","startX","startY","imgWidth","naturalWidth","imgHeight","naturalHeight","ratio","draw","which","dragging","lastMovingCoord","coord","u","getPointerCoords","move","x","y","preventDefault","stopPropagation","wheelDelta","detail","zoom","offset","stopit","noWhiteSpace","zoomIn","pos","speed","zoomSpeed","offsetX","offsetY","_x","drawImage","toDataURL","VueCroppa","Vue","options","component","cropper"],"mappings":"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"}